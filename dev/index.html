<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Extra Recipes for Encoding Predictors (MIT-Compatible Fork) • embedmit</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Extra Recipes for Encoding Predictors (MIT-Compatible Fork)">
<meta name="description" content="MIT-compatible fork of the embed package. Predictors can be converted to one or more numeric representations using a variety of methods. Effect encodings using simple generalized linear models &lt;doi:10.48550/arXiv.1611.09477&gt; or nonlinear models &lt;doi:10.48550/arXiv.1604.06737&gt; can be used. There are also functions for dimension reduction and other approaches. This fork defaults to tausworthe RNG in UMAP to avoid AGPL-licensed dependencies.">
<meta property="og:description" content="MIT-compatible fork of the embed package. Predictors can be converted to one or more numeric representations using a variety of methods. Effect encodings using simple generalized linear models &lt;doi:10.48550/arXiv.1611.09477&gt; or nonlinear models &lt;doi:10.48550/arXiv.1604.06737&gt; can be used. There are also functions for dimension reduction and other approaches. This fork defaults to tausworthe RNG in UMAP to avoid AGPL-licensed dependencies.">
<meta property="og:image" content="https://rmsharp.github.io/embedmit/logo.png">
<meta name="robots" content="noindex">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">embedmit</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.2.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/categorical-encoding-01.html">Encoding Categorical Data</a></li>
    <li><a class="dropdown-item" href="articles/categorical-encoding.html">Encoding Categorical Data</a></li>
    <li><a class="dropdown-item" href="articles/Applications/GLM.html">Using Generalized Linear Models</a></li>
    <li><a class="dropdown-item" href="articles/Applications/Tensorflow.html">Entity Embeddings of Categorical Variables using TensorFlow</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rmsharp/embedmit/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="embedmit">embedmit<a class="anchor" aria-label="anchor" href="#embedmit"></a>
</h1>
</div>
<!-- badges: start -->

<div class="section level2">
<h2 id="mit-compatible-fork-of-embed">MIT-Compatible Fork of embed<a class="anchor" aria-label="anchor" href="#mit-compatible-fork-of-embed"></a>
</h2>
<p><code>embedmit</code> is an MIT-licensed fork of the <a href="https://github.com/tidymodels/embed" class="external-link">embed</a> package from tidymodels. It provides the same recipe steps for encoding predictors but avoids AGPL-licensed dependencies at runtime.</p>
<div class="section level3">
<h3 id="why-embedmit">Why embedmit?<a class="anchor" aria-label="anchor" href="#why-embedmit"></a>
</h3>
<p>The original <code>embed</code> package depends on <code>uwot</code> for UMAP functionality, which in turn depends on <code>dqrng</code> (AGPL-3 licensed). This creates licensing complications for projects that need to maintain MIT or other permissive licensing throughout their dependency tree.</p>
<p><code>embedmit</code> solves this by: 1. Depending on <a href="https://github.com/rmsharp/uwotlite" class="external-link">uwotlite</a> instead of <code>uwot</code> - an MIT-licensed fork that replaces <code>dqrng</code> with <code>sitmo</code> 2. Using <code>rng_type = "tausworthe"</code> as the default for additional safety</p>
</div>
<div class="section level3">
<h3 id="key-differences-from-embed">Key Differences from embed<a class="anchor" aria-label="anchor" href="#key-differences-from-embed"></a>
</h3>
<table class="table">
<colgroup>
<col width="27%">
<col width="39%">
<col width="32%">
</colgroup>
<thead><tr class="header">
<th>Feature</th>
<th>embed</th>
<th>embedmit</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>License</td>
<td>MIT</td>
<td>MIT</td>
</tr>
<tr class="even">
<td>UMAP dependency</td>
<td>uwot (requires dqrng, AGPL-3)</td>
<td>uwotlite (MIT-only deps)</td>
</tr>
<tr class="odd">
<td>Default RNG for UMAP</td>
<td>PCG (via dqrng)</td>
<td>Tausworthe (built-in)</td>
</tr>
<tr class="even">
<td>Functionality</td>
<td>Full</td>
<td>Full</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="technical-changes">Technical Changes<a class="anchor" aria-label="anchor" href="#technical-changes"></a>
</h3>
<ol style="list-style-type: decimal">
<li>
<strong>Dependency change</strong>: <code>uwot</code> → <code>uwotlite</code> in DESCRIPTION</li>
<li>
<strong>Default RNG</strong> in <code>R/umap.R</code>:</li>
</ol>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># embed (original)</span></span>
<span><span class="va">options</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>verbose <span class="op">=</span> <span class="cn">FALSE</span>, n_threads <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># embedmit</span></span>
<span><span class="va">options</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>verbose <span class="op">=</span> <span class="cn">FALSE</span>, n_threads <span class="op">=</span> <span class="fl">1</span>, rng_type <span class="op">=</span> <span class="st">"tausworthe"</span><span class="op">)</span></span></code></pre></div>
<p>This ensures a fully MIT-compatible dependency chain with no AGPL-licensed packages.</p>
</div>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="section level3">
<h3 id="from-github">From GitHub<a class="anchor" aria-label="anchor" href="#from-github"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"rmsharp/embedmit"</span><span class="op">)</span></span></code></pre></div>
<p>Note that to use some steps, you will also have to install other packages such as <code>rstanarm</code> and <code>lme4</code>. For all of the steps to work, you may want to use:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"rpart"</span>, <span class="st">"xgboost"</span>, <span class="st">"rstanarm"</span>, <span class="st">"lme4"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p><code>embedmit</code> has extra steps for the <a href="https://recipes.tidymodels.org/" class="external-link"><code>recipes</code></a> package for embedding predictors into one or more numeric columns. Almost all of the preprocessing methods are <em>supervised</em>.</p>
<p>These steps are available here in a separate package because the step dependencies, <a href="https://CRAN.r-project.org/package=rstanarm" class="external-link"><code>rstanarm</code></a>, <a href="https://CRAN.r-project.org/package=lme4" class="external-link"><code>lme4</code></a>, and <a href="https://CRAN.r-project.org/package=keras3" class="external-link"><code>keras3</code></a>, are fairly heavy.</p>
<div class="section level3">
<h3 id="available-steps">Available Steps<a class="anchor" aria-label="anchor" href="#available-steps"></a>
</h3>
<p><strong>For categorical predictors:</strong></p>
<ul>
<li><p><code><a href="reference/step_lencode_glm.html">step_lencode_glm()</a></code>, <code><a href="reference/step_lencode_bayes.html">step_lencode_bayes()</a></code>, and <code><a href="reference/step_lencode_mixed.html">step_lencode_mixed()</a></code> estimate the effect of each of the factor levels on the outcome and these estimates are used as the new encoding. The estimates are estimated by a generalized linear model. This step can be executed without pooling (via <code>glm</code>) or with partial pooling (<code>stan_glm</code> or <code>lmer</code>). Currently implemented for numeric and two-class outcomes.</p></li>
<li><p><code><a href="reference/step_embed.html">step_embed()</a></code> uses <code><a href="https://keras3.posit.co/reference/layer_embedding.html" class="external-link">keras3::layer_embedding</a></code> to translate the original <em>C</em> factor levels into a set of <em>D</em> new variables (&lt; <em>C</em>). The model fitting routine optimizes which factor levels are mapped to each of the new variables as well as the corresponding regression coefficients (i.e., neural network weights) that will be used as the new encodings.</p></li>
<li><p><code><a href="reference/step_woe.html">step_woe()</a></code> creates new variables based on weight of evidence encodings.</p></li>
</ul>
<p><strong>For numeric predictors:</strong></p>
<ul>
<li><p><code><a href="reference/step_umap.html">step_umap()</a></code> uses a nonlinear transformation similar to t-SNE but can be used to project the transformation on new data. Both supervised and unsupervised methods can be used. <strong>Note:</strong> In embedmit, this uses <a href="https://github.com/rmsharp/uwotlite" class="external-link">uwotlite</a> and defaults to the tausworthe RNG for a fully MIT-compatible dependency chain.</p></li>
<li><p><code><a href="reference/step_discretize_xgb.html">step_discretize_xgb()</a></code> and <code><a href="reference/step_discretize_cart.html">step_discretize_cart()</a></code> can make binned versions of numeric predictors using supervised tree-based models.</p></li>
<li><p><code><a href="reference/step_pca_sparse.html">step_pca_sparse()</a></code> and <code><a href="reference/step_pca_sparse_bayes.html">step_pca_sparse_bayes()</a></code> conduct feature extraction with sparsity of the component loadings.</p></li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rmsharp/embedmit" class="external-link">embedmit</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidymodels/recipes" class="external-link">recipes</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a recipe with UMAP embedding</span></span>
<span><span class="va">rec</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://recipes.tidymodels.org/reference/recipe.html" class="external-link">recipe</a></span><span class="op">(</span><span class="va">Species</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">iris</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span> <span class="fu"><a href="https://recipes.tidymodels.org/reference/step_normalize.html" class="external-link">step_normalize</a></span><span class="op">(</span><span class="fu"><a href="https://recipes.tidymodels.org/reference/has_role.html" class="external-link">all_numeric_predictors</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span> <span class="fu"><a href="reference/step_umap.html">step_umap</a></span><span class="op">(</span><span class="fu"><a href="https://recipes.tidymodels.org/reference/has_role.html" class="external-link">all_numeric_predictors</a></span><span class="op">(</span><span class="op">)</span>, num_comp <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Prepare and bake</span></span>
<span><span class="va">prepped</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://recipes.tidymodels.org/reference/prep.html" class="external-link">prep</a></span><span class="op">(</span><span class="va">rec</span><span class="op">)</span></span>
<span><span class="va">baked</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://recipes.tidymodels.org/reference/bake.html" class="external-link">bake</a></span><span class="op">(</span><span class="va">prepped</span>, new_data <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="documentation">Documentation<a class="anchor" aria-label="anchor" href="#documentation"></a>
</h2>
<p>For detailed documentation on the embedding steps, please refer to the original embed documentation at <a href="https://embed.tidymodels.org/" class="external-link uri">https://embed.tidymodels.org/</a>.</p>
<p>Some references for these methods are:</p>
<ul>
<li>Francois C and Allaire JJ (2018) <a href="https://www.manning.com/books/deep-learning-with-r" class="external-link"><em>Deep Learning with R</em></a>, Manning</li>
<li>Guo, C and Berkhahn F (2016) “<a href="https://arxiv.org/abs/1604.06737" class="external-link">Entity Embeddings of Categorical Variables</a>”</li>
<li>Micci-Barreca D (2001) “<a href="https://scholar.google.com/scholar?hl=en&amp;as_sdt=0%2C5&amp;q=A+preprocessing+scheme+for+high-cardinality+categorical+attributes+in+classification+and+prediction+problems&amp;btnG=" class="external-link">A preprocessing scheme for high-cardinality categorical attributes in classification and prediction problems</a>,” ACM SIGKDD Explorations Newsletter, 3(1), 27-32.</li>
<li>Zumel N and Mount J (2017) “<a href="https://arxiv.org/abs/1611.09477" class="external-link"><code>vtreat</code>: a <code>data.frame</code> Processor for Predictive Modeling</a>”</li>
<li>McInnes L and Healy J (2018) <a href="https://arxiv.org/abs/1802.03426" class="external-link">UMAP: Uniform Manifold Approximation and Projection for Dimension Reduction</a>
</li>
<li>Good, I. J. (1985), “<a href="https://scholar.google.com/scholar?hl=en&amp;as_sdt=0%2C5&amp;q=Weight+of+evidence%3A+A+brief+survey&amp;btnG=" class="external-link">Weight of evidence: A brief survey</a>”, Bayesian Statistics, 2, pp.249-270.</li>
</ul>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p><a href="LICENSE.html">MIT</a></p>
</div>
<div class="section level2">
<h2 id="acknowledgments">Acknowledgments<a class="anchor" aria-label="anchor" href="#acknowledgments"></a>
</h2>
<p>This package is a fork of <a href="https://github.com/tidymodels/embed" class="external-link">embed</a> by Emil Hvitfeldt and Max Kuhn (Posit). All credit for the core functionality goes to the original authors and contributors.</p>
</div>
<div class="section level2">
<h2 id="see-also">See Also<a class="anchor" aria-label="anchor" href="#see-also"></a>
</h2>
<ul>
<li>The original <a href="https://github.com/tidymodels/embed" class="external-link">embed package</a>
</li>
<li>
<a href="https://github.com/rmsharp/uwotlite" class="external-link">uwotlite</a> - MIT-compatible fork of uwot with sitmo instead of dqrng</li>
<li>The <a href="https://www.tidymodels.org/" class="external-link">tidymodels</a> framework</li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/rmsharp/embedmit/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/rmsharp/embedmit/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing embedmit</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Emil Hvitfeldt <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-0679-1945" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>Max Kuhn <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-2402-136X" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>Posit Software, PBC <br><small class="roles"> Copyright holder, funder </small>  <a href="https://ror.org/03wc8by49" class="external-link"><img src="https://raw.githubusercontent.com/ror-community/ror-logos/main/ror-icon-rgb.svg" class="ror" alt="ROR"></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/rmsharp/embedmit/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/rmsharp/embedmit/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Emil Hvitfeldt, Max Kuhn, Posit Software, PBC.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
